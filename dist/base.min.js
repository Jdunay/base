/* base.min.js v0.0.17 */ 
!function(a){a.adaptors.backboneAssociatedModel=function(a,b){var c,d,e,f,g,h,i,j;return b&&(b+=".",g=new RegExp("^"+b.replace(/\./g,"\\.")),h=b.length),j=function(b){var c,d,e,g;c=b.split(":"),d=c[0],e=c[1],"change"===d&&e&&(g=a.get(e),g&&g.toJSON&&(g=g.toJSON()),f(e,g))},{init:function(k){b?(i=function(a){var c,d;d={};for(c in a)({}).hasOwnProperty.call(a,c)&&(d[b+c]=a[c]);return d},f=function(b,e){if(!c){d=!0;var f={};f[b]=e,k.set(i(a.changed)),d=!1}},e=function(b,e){d||g.test(b)&&(c=!0,a.set(b.substring(h),e),c=!1)}):(f=function(a,b){c||(d=!0,k.set(a,b),d=!1)},e=function(b,e){d||(c=!0,a.set(b,e),c=!1)}),a.on("all",j),k.on("set",e),k.set(b?i(a.toJSON()):a.toJSON())},teardown:function(b){a.off("all",j),b.off("set",e)}}}}(window.Ractive||require&&require("ractive")),function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,ab,bb,cb,db={}.hasOwnProperty,eb=function(a,b){function c(){this.constructor=a}for(var d in b)db.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},fb=[].slice,gb=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};for(w=window.Base,l=null,f={singletons:{}},null==window._JST&&(window._JST={}),d=window.Ractive||("function"==typeof window.require?require("Ractive"):void 0),g=[],h=/\s*[,:()]+\s*/,c="blur, focus, focusin, focusout, load, resize, scroll,  unload, click, dblclick, mousedown, mouseup, mousemove, mouseover,  mouseout, mouseenter, mouseleave, change, select, submit, keydown,  keypress, keyup, error, touchstart, touchend, touchmove".split(/\s*,\s*/),a=function(){function a(){a.__super__.constructor.apply(this,arguments)}return a}(),a.noConflict=function(){return window.Base=w,a},a.config={debug:{logModelChanges:!1}},a.View=function(b){function f(b){var c,d,g,h,i,j,k,l,n,o=this;for(this.options=null!=b?b:{},null==this.name&&(this.name=this.constructor.name),null==this.attributes&&(this.attributes={}),null==(i=this.attributes)["data-view"]&&(i["data-view"]=m(this.name.replace(/view/i,""))),null==this.children&&(this.children=new a.List(this.options.children||[])),null==this.ractive&&(this.ractive=!0),this.stateOptions=_.defaults(this.stateOptions||{},{relations:this.relations,compute:this.compute}),null==this.relations&&(this.relations={}),this.relations.$state=a.State,e(this),this._bindEvents(),f.__super__.constructor.apply(this,arguments),this._bindAttributes(),l=["view","all"],j=0,k=l.length;k>j;j++){g=l[j],n=a.plugins[g];for(d in n)h=n[d],c=this.plugins&&this.plugins[d]||a.defaults.view.plugins[d]||a.defaults.all.plugins[d],c&&h.call(this,this,c)}this._bindEventMethods(),this.state.on("all",function(){var a;return a=1<=arguments.length?fb.call(arguments,0):[],o.trigger.apply(o,a)}),this.trigger("init"),this.$el.data("view",this),this._bindEventBubbling(),this._bindSpecialCallbacks(),this._bindSpecialEventMethods()}return eb(f,b),f.prototype.moduleType="view",f.prototype.lookup=function(a){var b,c;for(b=this;b=b.parent;)if(c=b.get(a),null!=c)return c},f.prototype.require=function(){},f.prototype.define=function(){},f.prototype._bindAttributes=function(){var a,b,c,d,e,f=this;if(this.bindAttributes){for(d=this.bindAttributes,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(function(a){var b;return b=m(a),f.$el.attr("data-"+b,f.get(a)),f.on("change:"+a,function(a,c){return f.$el.attr("data-"+b,c)})}(a));return e}},f.prototype._bindEventMethods=function(){var a,b,d,e,f;for(f=[],d=0,e=c.length;e>d;d++)b=c[d],a=this["on"+j(b)],a?f.push(this.$el.on(""+b+".delegateEvents",a.bind(this))):f.push(void 0);return f},f.prototype._getCallback=function(a,b){var c,d,e;return _.isFunction(a)?a:(d=_.compact(a.split(h)),!d[1]&&b?a:(c=function(){var a,b,c,f;for(c=d.slice(1),f=[],a=0,b=c.length;b>a;a++)e=c[a],f.push(n(e));return f}(),this[d[0]].bind(this,c)))},f.prototype._bindEvents=function(){var a,b,c,d,e,f,g,i,k,l,m,n,o,p,q,r,s;if(this.events){o=this.events;for(e in o)k=o[e],k&&k.split&&h.test(k)&&(this.events[e]=this._getCallback(k))}"object"!=typeof this.bind&&(this.bind={});for(e in this)for(k=this[e],p=["document","window"],m=0,n=p.length;n>m;m++)d=p[m],g="on"+j(d),0===e.indexOf(g)&&(null==(l=this.bind)[d]&&(l[d]={}),this.bind[d][e.split(g)[1].toLowerCase()]=k);q=this.bind,s=[];for(e in q)k=q[e],"function"==(r=typeof k)||"string"===r?k?s.push(this.on(e,this._getCallback(k).bind(this))):s.push(void 0):"document"===e||"window"===e?(i="document"===e?document:window,a=$(i),s.push(function(){var c;c=[];for(f in k)b=k[f],c.push(a.on(""+f+".delegateEvents-"+this.cid,this._getCallback(b).bind(this)));return c}.call(this))):s.push(function(){var a;a=[];for(c in k)b=k[c],b?a.push(this.on(""+k+":"+c,this._getCallback(b).bind(this))):a.push(void 0);return a}.call(this));return s},f.prototype.render=function(){return this.trigger("before:render"),this.beforeRender&&this.beforeRender(),this.ractive&&this._initRactive(),this.trigger("render"),this._bindComponents(),this.afterRender&&this.afterRender(),this.trigger("after:render")},f.prototype._bindSpecialEventMethods=function(){var a=this;return this.on("all",function(){var b,c,d,e;return d=arguments[0],b=2<=arguments.length?fb.call(arguments,1):[],(c=i(d))?(e=a["on"+c[0].toUpperCase()+c.substring(1)],e?e.apply(null,b):void 0):void 0})},f.prototype._bindSpecialCallbacks=function(){var a,b,c,d,e,f=this;d=this.events,e=[];for(a in d)if(c=d[a],"string"==typeof c)if(b=c.split(":"),b[1])switch(spit[0]){case"set":e.push(this.events[a]=function(){return f.set(b[1].trim(),f.get(b[2].trim()))});break;case"toggle":e.push(this.events[a]=function(){return f.toggle(b[1])});break;default:e.push(void 0)}else e.push(void 0);else e.push(void 0);return e},f.prototype._bindComponents=function(){var b,c,d,e,f,g,h=this;f=a.components,g=[];for(c in f)e=f[c],b=this.ractive.fragment.items||[],d=b.map(function(a){return a.node}),g.push(this.$("x-"+c+", base-"+c,d).each(function(a,b){var c,d,f,g,j,k;for(c=$(b),f={},k=b.attributes,g=0,j=k.length;j>g;g++)d=k[g],f[i(d.name)]=d.value;return e.call(h,c,h,f)}));return g},f.prototype._parseObjectGetter=function(a){return a},f.prototype._parseTemplate=function(){},f.prototype._parseDOM=function(){var a,b;return a=function(b){var c,d,e,f,h,i,j,k,l,m,n,o,p,q,r,s;for(d={},r=b.attributes,s=[],n=0,p=r.length;p>n;n++){if(c=r[n],i=c.name,m=c.value,g=d[i]=[],/\{\{.*\}\}/.test(m))for(l=g.split(/\{\{|\}\}/),f=o=0,q=l.length;q>o;f=++o)h=l[f],j=f%2,j?(k=_.compact(h.split(/\s+|[\(\)+=-><%\/&!^\|]+/)),g.push({fn:new Function("return "+h),props:k})):g.push(h);s.push({attrs:d,children:function(){var c,d,f,g;for(f=b.chidren,g=[],c=0,d=f.length;d>c;c++)e=f[c],g.push(a(e));return g}()})}return s},b=a(this.el)},f.prototype._initRactive=function(){var b,c,e,f,g,h,i,j,k,o,p,q,r,s,t=this;if(this.options&&this.options.ractive||this.ractive){c=_.clone(a.filters);for(e in c)o=c[e],o&&o.bind&&(c[e]=o.bind(this));j="src/templates/views/"+m(this.name)+".html",i=this.template||_.clone(_JST[j])||this.$el.html(),this.ractive=new d({el:this.el,template:i,data:_.extend(this.toJSON(),{$view:this,$filter:a.filters,$base:a})});for(e in this)k=this[e],"function"==typeof k&&"_"!==e[0]&&!function(a,b){return t.ractive.on(a,function(c,d){var e,f,g;return null==d&&(d=""),"set"!==a||c.original?("string"!=typeof d&&(d=""),g=/^(?:'(.*?)'|"(.*?)")$/,e=_.compact(d.split(/\s*?(:|,)\s*?/)),f=e.map(function(a){var b,d,e,f;return a=a.trim(),(d=g.test(a))?RegExp.$1||RegExp.$2:(b=n(a),"string"!=typeof b?b:("."===a?f=c.keyPath:a&&"."===a[0]?f=""+c.keyPath+a:e=a,t.get(a)))}),f.push(c.original),b.apply(t,f)):void 0})}(e,k);for(b=d.adaptors.backboneAssociatedModel,this.ractive.bind(b(this.state)),this.ractive.bind(b(l.state,"$app")),this.ractive.bind(b(l.router.state,"$router")),h=[],f=this;f=f.parent;)h.push(f);for(p=0,q=h.length;q>p;p++)f=h[p],g=A(f.name),this.ractive.bind(b(f.state,"$parent."+g));r=app.singletons,s=[];for(e in r)k=r[e],k instanceof a.Model||k instanceof a.Collection?s.push(this.ractive.bind(b(k,"$"+e))):s.push(void 0);return s}},f.prototype._bindEventBubbling=function(){var a=this;return this.on("all",function(){var b;return b=1<=arguments.length?fb.call(arguments,0):[],a.broadcast.apply(a,b),a.emit.apply(a,b)})},f.prototype.trigger=function(){var b,c;return c=arguments[0],b=2<=arguments.length?fb.call(arguments,1):[],b[0]instanceof a.Event?b[0].currentTarget=this:b.unshift(new a.Event({name:c,target:this,currentTarget:this})),f.__super__.trigger.apply(this,arguments)},f.prototype.get=function(a){var b,c;if(a)return b=this.state,c=a,0===a.indexOf("$")&&(c=a.split(".").slice(1).join("."),b=0===a.indexOf("$app.")?app:app.singletons[a.split(".")[0].substring(1)]),b.get(c)},f.prototype.subView=function(){var b,c,d;if(b=1<=arguments.length?fb.call(arguments,0):[],b[1])d=b[1],c=b[0];else{if("string"==typeof b[0])return this.childView(b[0]);d=b[0]}return d?(d instanceof a.View||(d=new d),d.__viewName__=c,d.parent=this,this.children.push(d),d):(console.warn("No view passed to subView",b,arguments),void 0)},f.prototype.insertView=function(a,b){return b||(b=a,a=null),this.subView(b),a?this.$(a).append(b.$el):this.$el.append(b.$el),this},f.prototype.parentView=function(a,b){return this.parentViews(a,b)},f.prototype.findView=function(a){return this.findViews(a,!0)},f.prototype.childView=function(a){return this.childViews(a,!0)},f.prototype.childViews=function(a,b){return this.findViews(a,b,!0)},f.prototype.parentViews=function(a,b){var c,d;if(d=[],a){for(c=this;c=c.parent;)if(c.is&&c.is(a)){if(b)return c;d.push(c)}}else{if(b)return this.parent;d.push(this.parent)}return d},f.prototype.findViews=function(a,b,c){var d,e,f;return f=[],d=void 0,e=function(g){var h,i,j,k,l;for(k=g.children,l=[],i=0,j=k.length;j>i;i++){if(h=k[i],h.is(a)&&(f.push(h),b)){d=h;break}h&&!c?l.push(e(h)):l.push(void 0)}return l},e(this),b?d:f},f.prototype.is=function(a){var b,c,d,e,f,g;if(!a||a===this||this.$el.is(a))return!0;switch(typeof a){case"string":return e=function(a){return a.toLowerCase().replace(/view$/i,"")},d=e(a),c=this.__viewName__,e(this.name||"")===d||e(c||"")===d;case"function":return!!a(this);default:for(b in a)if(g=a[b],f=this.get(b),null==f&&(f=this[b]),g!==f)return!1;return!0}},f.prototype.destroy=function(){return this.ractive&&this.ractive.off&&(this.ractive.teardown(),this.ractive.unbind()),$([document,window]).off(".delegateEvents-"+this.cid),this.state.off(),this.state.stopListening(),this.state.cleanup()&&this.state.cleanup(),this.trigger("destroy"),this.cleanup&&this.cleanup(),this.$el.removeData("view"),this.$el.off(),this.off(),this.undelegateEvents(),this.remove(),this.parent?this.parent.children.splice(this.parent.children.indexOf(this),1):void 0},f.prototype.request=function(){var b,c,d,e,f,g,h,i;for(d=arguments[0],b=2<=arguments.length?fb.call(arguments,1):[],f=this,i=[];f=f.parent;){if(e=f["onRequest"+j(d)]||_.last(f._events["request:"+d])){c=new a.Event({type:"request",target:this}),g=(h=e.callback).call.apply(h,[e.ctx,c].concat(fb.call(b)));break}i.push(void 0)}return i},f.prototype.emit=function(){var b,c,d,e,f,g,h,i,j,k;if(d=arguments[0],b=2<=arguments.length?fb.call(arguments,1):[],g=this.parent)if(/^(child:|request:)/.test(d)){if(c=b[0],null==c&&(c=new a.Event({type:d,target:this})),!c.propagationStopped)return c.currentTarget=g,g.trigger.apply(g,arguments)}else if(!/^(app:|parent:|firstChild:|firstParent:)/.test(d)){for(e=A(this.name),c=new a.Event({name:d,target:this,currentTarget:g}),j=["child:"+d,"child:"+e+":"+d,"firstChild:"+d,"firstChild:"+e+":"+d],k=[],h=0,i=j.length;i>h;h++)f=j[h],k.push(g.trigger.apply(g,[f,c].concat(fb.call(b))));return k}},f.prototype.broadcast=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;if(e=arguments[0],b=2<=arguments.length?fb.call(arguments,1):[],this.children)if(/^(parent:|app:)/.test(e)){if(d=b[0]||new a.Event({type:e,target:this}),!d.propagationStopped)for(d.currentTarget=c,n=this.children,h=0,k=n.length;k>h;h++){if(c=n[h],d.propagationStopped)return;c.trigger.apply(c,arguments)}}else if(!/^(child:|request:|firstParent:|firstChild:)/.test(e))for(f=A(this.name),d=new a.Event({name:e,target:this}),o=this.children,i=0,l=o.length;l>i;i++)for(c=o[i],d.currentTarget=c,p=["parent:"+e,"parent:"+f+":"+e,"firstParent:"+e,"firstParent:"+f+":"+e],j=0,m=p.length;m>j;j++){if(g=p[j],d.propagationStopped)return;c.trigger.apply(c,[g,d].concat(fb.call(b)))}},f}(Backbone.View),a.App=function(a){function b(a){var c,d,e,g=this;this.options=a,l=this;for(d in f)e=f[d],l[d]=e;f=null,null==this.template&&(this.template=_JST["src/templates/app.html"]),c=$(window),c.on("resize.appResize-"+this.cid,function(){return g.set({windowWidth:c.width(),windowHeight:c.height(),documentWidth:document.width,documentHeight:document.height})}),b.__super__.constructor.apply(this,arguments)}return eb(b,a),b.prototype.require=function(){},b.prototype.destroy=function(){return $(window).off("resize.appResize-"+this.cid),b.__super__.destroy.apply(this,arguments)},b.prototype.define=function(){},b.prototype.init=function(a){return null==a&&(a=this.options),this.trigger("init",a)},b.prototype.broadcast=function(){var a,b,c,d,e,f,g;if(c=arguments[0],a=2<=arguments.length?fb.call(arguments,1):[],this.children&&!/^(child:|request:|firstParent:|firstChild:)/.test(c)){for(f=this.children,g=[],d=0,e=f.length;e>d;d++)b=f[d],g.push(b.trigger.apply(b,["app:"+c].concat(fb.call(a))));return g}},b.prototype.moduleType="app",b}(a.View),v=["model","view","singleton","collection","app","module","object","component","service","filter"],y=function(a){var b;return"function"!=typeof a?(b=a.pop(),b.dependencies=a):b=a,b},o=function(b){return b.map(function(b){var c,d,e,f;if(c=b.split("."),c[1])return a[c[0]](c[1]);for(e=0,f=v.length;f>e;e++)if(d=v[e],b.lastIndexOf(j(d))+d.length===b.length)return a[b](d.substring(0,d.length-b.length-1))})},p=function(a){return"function"==typeof a?q(a,o(a.dependencies||[])):void 0},q=function(a,b){var c;return c=function(){return a.apply(null,b)},c.prototype=a.prototype,new c},t=[],V=[a.App.prototype,a],C=function(b){var c,d,e,f;for(f=[],d=0,e=v.length;e>d;d++)c=v[d],f.push(function(c){var d;return null==b[d=""+c+"s"]&&(b[d]={}),b[c]=function(d,e){var f,g,h,i,k,l,m,n,o,q,r,s;if(typeof d===string&&!e)return b[c][j(d)];if(!d||!e)throw e=d,e=y(e),d=e.name||e.prototype.name,new Error("Modules must have a name");for(e=y(e),e.prototype&&null==(l=e.prototype).name&&(l.name=d),null==e.name&&(e.name=d),b[c][j(d)]=e,"function"==typeof e&&null==e.dependencies&&(e.dependencies=a.utils.getFunctionArgNames(e)),e.dependencies&&e.dependencies.length&&t.push({name:d,dependencies:_.clone(e.dependencies),module:e}),h=[],g=m=0,o=t.length;o>m;g=++m)i=t[g],f=i.dependencies,r=""+i.name+"{capitalize type}",gb.call(f,r)>=0&&(g=f.indexOf(""+i.name+"{capitalize type}"),f.splice(g,1),f.length||(h.push(g),p(e)));for(k=0,s=[],n=0,q=h.length;q>n;n++)g=h[n],s.push(t.splice(g-k++,1));return s}}(c));return f},F=0,J=V.length;J>F;F++)z=V[F],C(z);for(a.Model=function(b){function c(b,d){var f,g,h,i=this;null==b&&(b={}),null==d&&(d={}),null==this.name&&(this.name=this.constructor.name),h=_.extend(d.compute||{},this.compute);for(f in h)g=h[f],this.computeProperty(f,g);this instanceof a.State||(null==this.relations&&(this.relations={}),this.relations.$state=a.State),this._mapRelations(_.extend({},this.relations,d.relations)),c.__super__.constructor.apply(this,arguments),e(this),a.config.debug.logModelChanges&&this.on("change",function(){var a;try{return console.log(JSON.stringify(i.toJSON(),null,2))}catch(b){return a=b,console.log(a)}})}return eb(c,b),c.prototype.destroy=function(){return this.off(),this.stopListening(),c.__super__.destroy.apply(this,arguments)},c.prototype.blacklist=[],c.prototype._mapRelations=function(a){var c,d,e,f;if(null==a&&(a=this.relations),null==this.defaults&&(this.defaults={}),a&&!_.isArray(a)){e=[];for(d in a){for(f=a[d],c=!1,b=f;b=b.__super__;)b===Backbone.Collection.prototype&&(c=!0);e.push({key:d,type:c?"Many":"One",collectionType:c?f:void 0,relatedModel:c?f.prototype.model:f})}return this.relations=e}},c.prototype.toJSON=function(a){var b;return b=Backbone.AssociatedModel.prototype.toJSON.call(this),a?b:_.omit(b,this.blacklist)},c.prototype.computeProperty=function(a,b){var c,d,e,f,g,h,i=this;switch(b=_.clone(b),$.type(b)){case"object":d=b;break;case"array":d={fn:b.pop(),triggers:b}}for(this.blacklist.push(a),c=function(){var b,c;return c=d.triggers.map(function(a){return i.get(a)}),b=d.fn.apply(i,c),i.set(a,b)},h=d.triggers,f=0,g=h.length;g>f;f++)e=h[f],this.on("change:"+e,c);try{return c()}catch(j){}},c.prototype.toggle=function(a){return this.set(a,!this.get(a))},c.prototype.moduleType="model",c}(Backbone.AssociatedModel),a.State=function(a){function b(a,c,d){var e,f,g;if(null==c&&(c={}),null==this.relations&&(this.relations={}),d&&d.relations){g=d.relations;for(e in g)f=g[e],this.relations[e]=f}null==this.compute&&(this.compute=c.compute),b.__super__.constructor.call(this,a,c),this.parent=this.parents[0]||c.parent||d||a.parent,null==this.name&&(this.name=lowercase(this.constructor.name)),this.parent&&this.on("all",function(){var a=this;return function(){var b,c,d;return c=arguments[0],b=2<=arguments.length?fb.call(arguments,1):[],(d=a.parent).trigger.apply(d,["state:"+c].concat(fb.call(b)))}})}return eb(b,a),b}(a.Model),a.Object=function(){function a(){}return a}(),_.extend(a.Object.prototype,Backbone.Events),a.Stated=function(a){function b(){this.addState(this),b.__super__.constructor.apply(this,arguments)}return eb(b,a),b}(a.Object),a.Router=function(b){function c(){var a=this;null==this.name&&(this.name=this.constructor.name),this.stateOptions=_.defaults(this.stateOptions||{},{relations:this.relations,compute:this.compute}),e(this),c.__super__.constructor.apply(this,arguments),this.get("params")||this.set("params",{}),l.router=this,this.on("route",function(b,c){var d,e,f,g,h,i;for(a.set("route",c),a.set("path",c.split("/")),f={},g=location.href.split("?")[1].split(/&|=/),d=h=0,i=g.length;i>h;d=++h)e=g[d],d%2||(g[decodeURI(e)]=decodeURI(g[d+1]));return a.set("params",f)})}return eb(c,b),c.prototype.setParams=function(a,b){var c;return c=b?{}:this.get("params"),_.extend(c,a),this.set("params",a)},c.prototype.relations={params:a.Model},c.prototype.go=function(a){return this.navigate(a,!0)},c.prototype.destroy=function(){return this.off(),this.stopListening()},c.prototype.moduleType="router",c}(Backbone.Router),a.Collection=function(b){function c(){c.__super__.constructor.apply(this,arguments),null==this.name&&(this.name=this.constructor.name),e(this)}return eb(c,b),c.prototype.destroy=function(){return this.off(),this.stopListening()},c.prototype.model=a.Model,c.prototype.moduleType="collection",c}(Backbone.Collection),a.Singleton=function(a){function b(){var a,c,d=this;b.__super__.constructor.apply(this,arguments),null==(a=l||f)[c=A(this.name)]&&(a[c]=this),(l||f).singletons[A(this.name)]=this,this.on("all",function(){var a,b;return b=arguments[0],a=2<=arguments.length?fb.call(arguments,1):[],l?l.trigger.apply(l,[""+A(d.name)+":"+b].concat(fb.call(a))):void 0})}return eb(b,a),b}(a.Model),a.List=function(){function a(a,b){null==b&&(b={}),this.reset(a,b),b.noState||e(this),_.isFunction(this.initialize)&&this.initialize.apply(this,arguments)}return a.prototype.unshift=function(){var a,b,c,d,e,f;for(b=1<=arguments.length?fb.call(arguments,0):[],e=b.reverse(),f=[],c=0,d=e.length;d>c;c++)a=e[c],f.push(this.add(a,{at:0}));return f},a.prototype.push=function(){var a,b,c,d,e;for(b=1<=arguments.length?fb.call(arguments,0):[],e=[],c=0,d=b.length;d>c;c++)a=b[c],e.push(this.add(a,{at:this.length}));return e},a.prototype.shift=function(){return this.remove(null,{at:0})},a.prototype.pop=function(){return this.remove(null,{at:this.length-1})},a.prototype.eventNamespace="listItem:",a.prototype.bubbleEvents=!0,a.prototype.reset=function(a,b){return null==b&&(b={}),this.splice(this.length,this.length),this.push.apply(this,a),b.silent?void 0:this.trigger("reset",this,b)},a.prototype.add=function(a,b){var c,d=this;return null==b&&(b={}),c=null!=b.at?b.at:b.at=this.length,this.bubbleEvents&&a&&_.isFunction(a.on)&&this.listenTo(a,"all",function(){var a,b;return b=arguments[0],a=2<=arguments.length?fb.call(arguments,1):[],d.bubbleEvents?d.trigger.apply(d,[""+d.eventNamespace+d.eventName].concat(fb.call(a))):void 0}),this.model&&(a=new this.model(a)),this.splice(c,null,a),b.silent?void 0:this.trigger("add",a,this,b)},a.prototype.remove=function(a,b){var c;return null==b&&(b={}),c=b.at||this.indexOf(a),null==a&&(a=this[c]),this.splice(c,1),b.silent||this.trigger("remove",a,this,b),this.stopListening(a)},a}(),_.extend(a.List.prototype,Backbone.Events),W=["splice","indexOf","lastIndexOf","join","reverse","sort","valueOf","map","forEach","every","reduce","reduceRight","filter","some"],G=0,K=W.length;K>G;G++)r=W[G],a.List.prototype[r]||(a.List.prototype[r]=g[r]);for(X=["each","contains","find","filter","reject","contains","max","min","sortBy","groupBy","sortedIndex","shuffle","toArray","size","first","last","initial","rest","without","isEmpty","chain","where","findWhere","clone","pluck","invoke"],H=0,L=X.length;L>H;H++)r=X[H],a.List.prototype[r]||(a.List.prototype[r]=_[r]);for(a.Event=function(){function a(a){this.options=a,_.extend(this,this.options),null==this.currentTarget&&(this.currentTarget=this.target)}return a.prototype.preventDefault=function(){return this.defaultPrevented=!0},a.prototype.stopPropagation=function(){return this.propagationStopped=!0},a}(),Y=["View","Router"],I=0,M=Y.length;M>I;I++)for(u=Y[I],Z=["get","set","toJSON","has","unset","escape","changed","clone","keys","values","pairs","invert","pick","omit","clear","toggle"],D=function(b){var c;return null!=(c=a[u].prototype)[b]?(c=a[u].prototype)[b]:c[b]=function(){var a,c;return a=1<=arguments.length?fb.call(arguments,0):[],(c=this.state)[b].apply(c,a)}},R=0,N=Z.length;N>R;R++)r=Z[R],D(r);for(b=function(a){function b(a){var c,d,e,f=this;null==a&&(a={}),null==this.name&&(this.name=a.name||(a.model&&a.model.name?a.model.name+":view":void 0)),e=a.view,d=a.html,c=a.data,this.ractive=!!e.ractive,a.path&&(this.relations={model:e.get(a.path).model}),null==this.template&&(this.template=d),b.__super__.constructor.apply(this,arguments),a.model&&this.set("model",a.model),d&&this.set("html",d),this.ractive?this.render():this.$el.html(d),c&&(c.toJSON?(this.set(c.toJSON()),this.listenTo(c,"all",function(a){var b,d,e;return e=a.split(":"),b=e[0],d=e[1],"change"===b&&d?f.set(keyPath,c.get(keyPath)):void 0})):this.set(c))}return eb(b,a),b}(a.View),m=function(a){return a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()},i=function(a){return a.replace(/[^\d\w]+(.)?/g,function(a,b){return b?b.toUpperCase():""})},n=function(a){var b;try{return a?"true"===a?!0:"false"===a?!1:"null"===a?null:isNaN?/^[\[\{]/.test(a)?JSON.parse(a):a:Number(a):a}catch(c){return b=c,a}},j=function(a){return a?a[0].toUpperCase()+a.substring(1):""},e=function(b){var c,d,e=this;return b instanceof a.State?void 0:(d=b.state||{},null==b.blacklist&&(b.blacklist=[]),b.blacklist.push("$state"),b instanceof a.Model?(b.set("$state",_.defaults(d,b.stateDefaults)),c=b.state=b.get("$state")):(d=_.defaults(d,b.stateDefaults||b.defaults),c=b.state=new a.State(d,b.stateOptions,b),null==c.associations&&(c.associations=[]),c.associations.push({type:"one",key:"$parent",relatedModel:a.State}),this.parent&&this.parent.state&&(c.set("$parent",this.parent.state.toJSON()),this.listenTo(this.parent.state,"all",function(a){var b;return b=a.split(":"),"change"===b[0]&&b[1]?e.set("$state."+b[1],c.get(b[1])):void 0}))),b instanceof a.View&&c.set("$state",c),c.on("all",function(){var a,c,d;return c=arguments[0],a=2<=arguments.length?fb.call(arguments,1):[],d=c.split(":"),"change"===d[0]&&d[1]?b.trigger.apply(b,["change:$state."+d[1]].concat(fb.call(a))):void 0}))},A=function(a){return a?a[0].toLowerCase()+a.substring(1):""},a.components={collection:function(a,c,d){var e,f,g,h,i,k=this;return null==d&&(d={}),i=d.path||d.collection,h=d.name,e=l.views[j(d.view)]||b,f=a.html(),a.empty(),g=function(b){return k.insertView(a,new e(_.extend({data:b,html:f,view:c,parent:k,name:h,path:i,model:b},d)))},this.on("reset:"+i,function(){var a,b,d,e,f;for(e=k.childViews(c),f=[],d=0,b=e.length;b>d;d++)a=e[d],f.push(a.destroy());return f}),this.on("remove:"+i,function(a){return k.childView({model:a}).destroy()}),this.on("add:"+i,g),this.get(i).each(g)},view:function(a,c,d){var e,f,g,h,k;return k=d.view||d.type,e=l.views[j(i(k))]||b,h=d.name,f=this.get(d.data)||c.state,g=a.html(),a.empty(),this.subView(new e(_.extend({el:a[0],html:g,view:c,name:h,data:f},d)))},log:function(a,b,c){var d,e,f;e={};for(d in c)f=c[d],e[d]=this.get(f);return console.log("base-log:",e),a.remove()},list:function(){}},a.plugins={view:{ractive:function(){},actions:function(){var a,b,d,e,f=this;for(e=[],d=0,b=c.length;b>d;d++)a=c[d],e.push(function(a){var b;return b=function(b){var c,d,e;return c=$(b.currentTarget),d=c.attr("action-"+a)||c.attr("data-action-"+a),e=f._getCallback(d),e.call(f)},f.$el.on(a,"[data-action-"+a+"], [action-"+a+"]",_.debounce(b,1,!0))}(a));return e},outlets:function(){var a,b=this;return a=[],this.on("render",function(){var c,d,e,f,g,h,j,k,l,m,n;for(l=$("[outlet], [data-outlet]",b.ractive.fragment.items),n=[],k=0,j=l.length;j>k;k++)if(d=l[k],c=$(d),g=i(c.attr("data-outlet")||c.attr("outlet")),_.contains(a,g))n.push(void 0);else{a.push(g),b.$[g]=b.$("[data-outlet='"+g+"'], [outlet='"+g+"']"),e=[];for(f in b)h=b[f],new RegExp("on(.*)?"+g,"i").test(f)&&e.push(RegExp.$1.toLowerCase());m=b._events;for(f in m)h=m[f],new RegExp("^([^:]*?):"+g,"i").test(f)&&e.push(RegExp.$1.toLowerCase());n.push(c.on(e.join,function(a){return b.trigger([event.type,g].join(":"),a)}))}return n})}},all:{state:function(){}}},a.filters={uncapitalize:function(a){return a&&a[0].toLowerCase()+a.substring(1)||""},capitalize:function(a){return a&&a[0].toUpperCase()+a.substring(1)||""},uppercase:function(a){return a.toUpperCase()},lowercase:function(a){return a.toLowerCase()},json:function(a){return JSON.stringify(a,null,2)},orderBy:function(a,b,c){return a=a.sort(function(a){return a[b]}),c?a.reverse():a}},a.defaults={all:{plugins:{state:!0}},view:{plugins:{actions:!1,outlets:!0,filters:!0,ractive:!0,components:!0,manage:!0,eventSugar:!0}},model:{plugins:{}},router:{plugins:{}},collection:{plugins:{}}},ab=["Model","Router","Collection","View","Stated","App","List"],S=0,O=ab.length;O>S;S++)for(k=ab[S],bb=["get","set","on","listenTo","off","stopListening","once","listenToOnce","trigger","clear","has","invert","omit","pick","sync","fetch","save","changed","validate","isValid","clone","hasChanged","previous","destroy"],E=function(b){return a[k].prototype["state"+j(b)]=function(){var a,c;return a=1<=arguments.length?fb.call(arguments,0):[],(c=this.state)[b].apply(c,a)}},T=0,P=bb.length;P>T;T++)r=bb[T],E(r);for(a.Controller=a.View,window.Base=a,a.utils={store:{getItem:function(a){return JSON.parse(localStorage.getItem(a))},setItem:function(a,b){return localStorage.setItem(a,JSON.stringify(b))},extendItem:function(a,b){return this.lsSetItem(_.extend(this.lsGetItem(a)||{},b))}},getFunctionArgNames:function(a){return a.toString().match(/\(.*?\)/)[0].replace(/[()\s]/g,"").split(",")}},cb=["List","Object","Event"],U=0,Q=cb.length;Q>U;U++)s=cb[U],null==(B=a[s].prototype).extend&&(B.extend=Backbone.Model.prototype.extend);a.define=a.service,a.require=function(a,b){null==b&&(b=null)},a.define=function(a,b){null==b&&(b=null)},a._super=function(a,b,c){return a.constructor.__super__[b].apply(a,c)},x=function(a){return a.toString().match(/require\('.*?'\)/g).map(function(a){return a.match(/require\('(.*?)'\)/)[1]})},a.services.require=function(b){var c,d,e,f,g,h,i;if(d=b.split(/(?![a-z])(?=[A-Z])/),u=_.last(d).toLowerCase(),gb.call(v,u)>=0)return e=b.substring(0,b.length-d.length),c=""+u+"s",l[c][e]||a[c][e];for(e=b,i=["app","singleton","service","module","object"],h=0,g=i.length;g>h;h++)if(f=i[h],s=l[f][e]||a[f][e])return s},null==a.apps&&(a.apps={}),$(function(){return $("[base-app]").each(function(b,c){var d,e,f;return f=c.getAttribute("base-app"),d=a.apps[j(f)],e=a.apps[A(f)],e&&e.el===c?void 0:new d({el:c})})})}.call(this);